. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ§ª Running Jest tests for changed files..."
CHANGED_FILES=$(git diff --name-only --cached -- '*.js')

if [ -n "$CHANGED_FILES" ]; then
  npx jest --bail --findRelatedTests $CHANGED_FILES || {
    echo "âŒ Jest tests failed"
    exit 1
  }
else
  echo "âŒ No JavaScript files changed, skipping Jest tests"
fi

echo "ğŸ” Running ESLint with fixes..."
npx eslint . --fix || {
  echo "âŒ ESLint failed"
  exit 1
}

echo "ğŸ“ Checking code formatting with Prettier..."
npx prettier --check . || {
  echo "âŒ Prettier formatting check failed"
  exit 1
}

echo "âœ… All checks passed!"
